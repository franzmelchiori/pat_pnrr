<div class="container">
    <div id="scatter-life-expectancy-timeline" style="height:720px;"></div>

    <script type="text/javascript">
        var dom = document.getElementById('scatter-life-expectancy-timeline');
        var myChart = echarts.init(dom, null, {
            renderer: 'canvas',
            useDirtyRect: false
        });
        var app = {};

        var data = {
            "counties": [
                "China",
                "United States"
            ],
            "series": [
                [
                    [
                        985,
                        32,
                        321675013,
                        "China",
                        1800
                    ],
                    [
                        2128,
                        39.41,
                        6801854,
                        "United States",
                        1800
                    ]
                ],
                [
                    [
                        1000,
                        32,
                        350542958,
                        "China",
                        1810
                    ],
                    [
                        2283,
                        39.41,
                        8294928,
                        "United States",
                        1810
                    ]
                ]
            ],
            "timeline": [
                1800,
                1810
            ]
        }
        
        var schema = [
            { name: 'Income', index: 0, text: '人均收入', unit: '美元' },
            { name: 'LifeExpectancy', index: 1, text: '人均寿命', unit: '岁' },
            { name: 'Population', index: 2, text: '总人口', unit: '' },
            { name: 'Country', index: 3, text: '国家', unit: '' }];
        
        var itemStyle = {
            opacity: 0.8};
        
        var option = {
            baseOption: {
                timeline: {
                    axisType: 'category',
                    orient: 'vertical',
                    autoPlay: true,
                    inverse: true,
                    playInterval: 1000,
                    left: null,
                    right: 0,
                    top: 20,
                    bottom: 20,
                    width: 55,
                    height: null,
                    symbol: 'none',
                    checkpointStyle: {
                        borderWidth: 2},
                    controlStyle: {
                        showNextBtn: false,
                        showPrevBtn: false},
                    data: []},
                title: [{
                    text: 'bla',
                    left: 'center',
                    top: 10,
                    textStyle: {
                        fontWeight: 'normal',
                        fontSize: 20}}],
                tooltip: {
                    padding: 5,
                    borderWidth: 1,
                    formatter: function (obj) {
                        var value = obj.value;
                        return schema[3].text + '：' + value[3] + '<br>'
                            + schema[1].text + '：' + value[1] + schema[1].unit + '<br>'
                            + schema[0].text + '：' + value[0] + schema[0].unit + '<br>'
                            + schema[2].text + '：' + value[2] + '<br>';}},
                grid: {
                    top: 100,
                    containLabel: true,
                    left: 30,
                    right: '110'},
                xAxis: {
                    type: 'log',
                    name: '人均收入',
                    max: 100000,
                    min: 300,
                    nameGap: 25,
                    nameLocation: 'middle',
                    nameTextStyle: {
                        fontSize: 18},
                    splitLine: {
                        show: false},
                    axisLabel: {
                        formatter: '{value} $'}},
                yAxis: {
                    type: 'value',
                    name: '平均寿命',
                    max: 100,
                    nameTextStyle: {
                        fontSize: 18},
                    splitLine: {
                        show: false},
                    axisLabel: {
                        formatter: '{value} 岁'}},
                visualMap: [{
                    show: false,
                    dimension: 3,
                    categories: data.counties,
                    inRange: {
                        color: (function () {
                            var colors = ['#51689b', '#ce5c5c', '#fbc357', '#8fbf8f', '#659d84', '#fb8e6a', '#c77288', '#786090', '#91c4c5', '#6890ba'];
                            return colors.concat(colors);})()}}],
                series: [{
                    type: 'scatter',
                    itemStyle: itemStyle,
                    data: data.series[0]}],
                animationDurationUpdate: 1000,
                animationEasingUpdate: 'quinticInOut'},
            options: []};

        for (var n = 0; n < data.timeline.length; n++) {
            option.baseOption.timeline.data.push(data.timeline[n]);
            option.options.push({
                series: {
                    name: data.timeline[n],
                    type: 'scatter',
                    itemStyle: itemStyle,
                    data: data.series[n]}})}

        myChart.setOption(option);
        window.addEventListener('resize', myChart.resize);
    </script>
</div>
<br>
